---
title: shell中的重定向
category: [toolswiki, linux]
sidebar:
    nav: TOOL
---

## 一、文件描述符

当执行shell命令时，会默认打开3个文件，每个文件有对应的文件描述符。具体如下：

| 类型                        | 文件描述符 | 默认情况               | 对应文件句柄位置 |
| --------------------------- | ---------- | ---------------------- | ---------------- |
| 标准输入（standard input）  | 0          | 从键盘获得输入         | /proc/self/fd/0  |
| 标准输出（standard output） | 1          | 输出到屏幕（即控制台） | /proc/self/fd/1  |
| 错误输出（error output）    | 2          | 输出到屏幕（即控制台） | /proc/self/fd/   |

## 二、输入输出重定向符号

在执行shell命令中，默认是从键盘获得输入，默认将结果输出到控制台上。但可以通过**重定向**操作更改文件描述符默认的指向，改变**输入来源**以及**输出位置**。

例如：将1指向某一文件filename，那么标准的输出就会输出到filename中。

### 1. 输出重定向（>或>>）

|        命令         | 介绍                                                         |
| :-----------------: | ------------------------------------------------------------ |
|  command >filename  | 把执行command命令执行得到的标准**输出**重定向到新文件filename中。 |
| command 1>filename  | 同上。                                                       |
| command >>filename  | 把执行command命令执行得到的标准**输出**追加到文件filename的末尾。 |
| command 1>>filename | 同上。                                                       |
| command 2>filename  | 把执行command命令得到的标准**错误**重定向到新文件filename中。 |
| command 2>>filename | 把执行command命令执行得到的标准**错误**追加到文件filename的末尾。 |

注：在`command >filename`命中中，输出重定向符号`>`的左边省略掉文件描述符时，默认为标准**输出**`1`。

示例：

执行以下命令：

```shell
$ ls >log.txt
```

那么控制台上则不会输出任何内容。当前文件夹中会新建一个名为`log.txt`的文件，其中记录着`ls`命令的输出结果。

### 2. 输入重定向（<或<<）

|        命令         | 介绍                                        |
| :-----------------: | ------------------------------------------- |
|  command <filename  | 以filename文件中的内容作为标准输入。        |
| command 0<filename  | 同上。                                      |
| command <<delimiter | 从标准输入中读入，直到遇到delimiter分隔符。 |



## 三、2>&1

`2>&1`是经常会看到被用在某一命令末尾的一个重定向命令部分。其具体含义就是将命令执行的**错误输出重定向到了标准输出中**。

在默认情况下，错误输出和标准输出都是输出在控制台上，因此`2>&1`不需要写出。在使用`2>&1`时，**往往是和其它的重定向命令共同使用**，例如：

```shell
$ command >log.txt 2>&1
```

其中`>log.txt`只是将执行`command`命令得到的标准输出重定向到了`log.txt`文件，而`2>&1`则将错误输出重定向到了标准输出。由于前面的`>log.txt`已经将标准输出重定向到了`log.txt`文件，因此错误输出也重定向到了`log.txt`文件。










参考：

https://blog.csdn.net/qq_31073871/article/details/80810306